<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="lxm798">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="lxm798">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="lxm798">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/">





  <title>lxm798</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">lxm798</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/04/语言/java/synchronizer/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lxm798">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/04/语言/java/synchronizer/" itemprop="url">.synchronizer</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-10-04T11:11:16+08:00">
                2019-10-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="java-Synchronized"><a href="#java-Synchronized" class="headerlink" title="java Synchronized"></a>java Synchronized</h1><h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p>Synchronized 作为java 中的常用同步方法,本文介绍Synchronized相关的概念,自旋锁,偏向锁,轻量级锁,重量级锁</p>
<h2 id="性能"><a href="#性能" class="headerlink" title="性能"></a>性能</h2><p>在java1.6之前Synchronized的性能较差,直接依赖于操作系统提供的mutex网上大部分说法是会直接陷入系统调用,导致性能很差.但是实际上在2.6内核以后引入futex,mutex在没有冲突的情况是不会陷入系统调用的.查询java1.5的发布时间在J2SE 5.0 (1.5.0) Tiger,老虎 2004-10,但是支持futex的kernel的发布时时间再2.5 releasedJuly 2, 2003,glibc引入futex则更晚.如果synchronized依赖futex的话,实际性能不会那么差.</p>
<p>##MarkWord/对象头<br>HotSpot虚拟机中,对象在内存中的布局可以分为三块,对象头(Header),实例数据(Instance Data)和对齐数据(Padding)<br>HotSpot虚拟机的对象头包括两部分信息:</p>
<ul>
<li>对象自身运行时的数据: 如哈希码(HashCode),GC分代年龄,锁状态标识,线程持有的锁,偏向线程ID,偏向时间戳等</li>
<li>指向累的元数据的指针:虚拟机通过这个指针来确定这个对象是哪个类的实例.并不是所有的虚拟机都在对象数据上保存类型指针.这个类似于C++中虚函数指针.<br><img src="./markword.png" alt="对象运行时数据"></li>
</ul>
<h2 id="轻量级锁"><a href="#轻量级锁" class="headerlink" title="轻量级锁"></a>轻量级锁</h2><p>轻量级锁类似于自旋锁. 加锁过程</p>
<p>1) copy对象markword到当前堆栈中<br>2) cas markword指向当前堆栈,如果成功则继续执行,如果失败,当时owner是当前线程,也继续执行,否则膨胀为重量级锁</p>
<p>解锁过程:</p>
<p>1) 将原始的数据重新cas到markword中</p>
<h2 id="偏向锁"><a href="#偏向锁" class="headerlink" title="偏向锁"></a>偏向锁</h2><p>偏向锁的目标是为了减少加锁的次数,适用于统一时刻只有一个线程在用锁的场景<br>加锁过程</p>
<p>1) cas 当前markword,如果成功则获得锁,如果失败则进入safepoint,锁撤销后升级锁到轻量级锁<br>解锁过程:<br>偏向锁本身不进行解锁,但是可以重偏向.<br>重偏向的过程:</p>
<ol>
<li>如果偏向锁已经被加锁,在safepoint时,检查占有该偏向锁的线程是否还存在,如果存在则升级偏向锁,如果不存在则进行重偏向</li>
</ol>
<p>撤销的过程:<br>偏向锁的撤销： 偏向锁使用了一种等到竞争出现才释放锁的机制，所以当其他线程尝试竞争偏向锁时，持有偏向锁的线程才会释放锁。偏向锁的撤销，需要等待全局安全点（在这个时间点上没有字节码正在执行），它会首先暂停拥有偏向锁的线程，然后检查持有偏向锁的线程是否活着，如果线程不处于活动状态，则将对象头设置成无锁状态，如果线程仍然活着，拥有偏向锁的栈会被执行，遍历偏向对象的锁记录，栈中的锁记录和对象头的Mark Word要么重新偏向于其他线程，要么恢复到无锁或者标记对象不适合作为偏向锁，最后唤醒暂停的线程。</p>
<h2 id="问题为什么偏向锁需要全局检查点-而轻量级锁不需要"><a href="#问题为什么偏向锁需要全局检查点-而轻量级锁不需要" class="headerlink" title="问题为什么偏向锁需要全局检查点,而轻量级锁不需要"></a>问题为什么偏向锁需要全局检查点,而轻量级锁不需要</h2><p>因为偏向锁没有释放的过程,如果所在的线程一直在运行,是无法判断锁当前是否被使用的,只能通过暂停线程来升级,当时为什么不是只暂停申请线程和持有线程呢?假如A持有偏向锁,B持有锁,A,B到safepoint停止后,唤醒VMTHread处理锁撤销,在撤销的过程中C也到检查点,此时C需要发送撤销操作,但是和前面重复,如果不发送又不能撤销锁</p>
<p><a href="https://blog.csdn.net/iter_zc/article/details/41847887" target="_blank" rel="noopener">https://blog.csdn.net/iter_zc/article/details/41847887</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/04/语言/java/stw/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lxm798">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/04/语言/java/stw/" itemprop="url">.stw</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-10-04T11:11:16+08:00">
                2019-10-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="STW和Safepint"><a href="#STW和Safepint" class="headerlink" title="STW和Safepint"></a>STW和Safepint</h1><h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p>Safe-point (or safepoint)<br>In order to support precise enumeration, JIT compiler should do additional work, because only JIT knows exactly stack frame info and register contents. When JIT compiles a method, for every instruction, it can book-keep the root reference information in case the execution is suspended at that instruction. </p>
<p>But to remember the info for every instruction is too expensive. It requires substantial space to store the information. This is also unnecessary, because only a few instructions will have the chances to be the suspension points in real execution. JIT only needs to book-keep information for those instruction points – they are called safe-points. Safe-point means it is a safe suspension point for root set enumeration.</p>
<p>Btw, the ability of a compiler to know exact stack slots’ information is not universally available in all programming languages. Only safe languages have the ability. For example, C/C++ doesn’t.</p>
<h2 id="触发"><a href="#触发" class="headerlink" title="触发"></a>触发</h2><p>safepoint指的特定位置主要有:</p>
<ol>
<li><p>循环的末尾 (防止大循环的时候一直不进入safepoint，而其他线程在等待它进入safepoint)</p>
</li>
<li><p>方法返回前</p>
</li>
<li><p>调用方法的call之后</p>
</li>
<li><p>抛出异常的位置</p>
</li>
</ol>
<h2 id="STW的行为-代码"><a href="#STW的行为-代码" class="headerlink" title="STW的行为/代码"></a>STW的行为/代码</h2><p>在VMThead 触发begin后,VMThread循环遍历Thread状态</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">unsigned <span class="keyword">int</span> iterations = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> steps = <span class="number">0</span> ;</span><br><span class="line"><span class="keyword">while</span>(still_running &gt; <span class="number">0</span>) &#123;</span><br><span class="line">  <span class="keyword">for</span> (JavaThread *cur = Threads::first(); cur != NULL; cur = cur-&gt;next()) &#123;</span><br><span class="line">    <span class="keyword">assert</span>(!cur-&gt;is_ConcurrentGC_thread(), <span class="string">"A concurrent GC thread is unexpectly being suspended"</span>);</span><br><span class="line">    ThreadSafepointState *cur_state = cur-&gt;safepoint_state();</span><br><span class="line">    <span class="keyword">if</span> (cur_state-&gt;is_running()) &#123;</span><br><span class="line">      cur_state-&gt;examine_state_of_thread();</span><br><span class="line">      <span class="keyword">if</span> (!cur_state-&gt;is_running()) &#123;</span><br><span class="line">         still_running--;</span><br><span class="line">         <span class="comment">// consider adjusting steps downward:</span></span><br><span class="line">         <span class="comment">//   steps = 0</span></span><br><span class="line">         <span class="comment">//   steps -= NNN</span></span><br><span class="line">         <span class="comment">//   steps &gt;&gt;= 1</span></span><br><span class="line">         <span class="comment">//   steps = MIN(steps, 2000-100)</span></span><br><span class="line">         <span class="comment">//   if (iterations != 0) steps -= NNN</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (TraceSafepoint &amp;&amp; Verbose) cur_state-&gt;print();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (PrintSafepointStatistics &amp;&amp; iterations == <span class="number">0</span>) &#123;</span><br><span class="line">    begin_statistics(nof_threads, still_running);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (still_running &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="comment">// Check for if it takes to long</span></span><br><span class="line">    <span class="keyword">if</span> (SafepointTimeout &amp;&amp; safepoint_limit_time &lt; os::javaTimeNanos()) &#123;</span><br><span class="line">      print_safepoint_timeout(_spinning_timeout);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> ThreadSafepointState::examine_state_of_thread() &#123;</span><br><span class="line"> </span><br><span class="line">  JavaThreadState state = _thread-&gt;thread_state();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Save the state at the start of safepoint processing.</span></span><br><span class="line">  _orig_thread_state = state;</span><br><span class="line"></span><br><span class="line">  bool is_suspended = _thread-&gt;is_ext_suspended();</span><br><span class="line">  <span class="keyword">if</span> (is_suspended) &#123;</span><br><span class="line">    roll_forward(_at_safepoint);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Some JavaThread states have an initial safepoint state of</span></span><br><span class="line">  <span class="comment">// running, but are actually at a safepoint. We will happily</span></span><br><span class="line">  <span class="comment">// agree and update the safepoint state here.</span></span><br><span class="line">  <span class="keyword">if</span> (SafepointSynchronize::safepoint_safe(_thread, state)) &#123;</span><br><span class="line">    SafepointSynchronize::check_for_lazy_critical_native(_thread, state);</span><br><span class="line">    roll_forward(_at_safepoint);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (state == _thread_in_vm) &#123;</span><br><span class="line">    roll_forward(_call_back);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p><a href="http://xiao-feng.blogspot.com/2008/01/gc-safe-point-and-safe-region.html" target="_blank" rel="noopener">http://xiao-feng.blogspot.com/2008/01/gc-safe-point-and-safe-region.html</a><br><a href="http://jpbempel.blogspot.com/2013/03/safety-first-safepoints.html" target="_blank" rel="noopener">http://jpbempel.blogspot.com/2013/03/safety-first-safepoints.html</a><br><a href="https://www.jianshu.com/p/43bc97230299" target="_blank" rel="noopener">https://www.jianshu.com/p/43bc97230299</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/04/语言/java/gc/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lxm798">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/04/语言/java/gc/" itemprop="url">.gc</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-10-04T11:11:16+08:00">
                2019-10-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Gc"><a href="#Gc" class="headerlink" title="Gc"></a>Gc</h1><h2 id="内存区域"><a href="#内存区域" class="headerlink" title="内存区域"></a>内存区域</h2><ul>
<li>程序计数器 :当前线程所执行的字节码的行号指示器</li>
<li>JAVA堆 : Eden, From Survivor, To Survivor, TLB</li>
<li>虚拟机栈:线程私有,生命周期和线程相同.</li>
<li>本地方法栈:</li>
<li>方法区</li>
<li>运行时常量池</li>
<li>直接内存/堆外内存:NIO Buffer</li>
</ul>
<h2 id="分代信息"><a href="#分代信息" class="headerlink" title="分代信息"></a>分代信息</h2><ul>
<li>Eden/young</li>
<li>old</li>
<li>survive</li>
<li>永久代</li>
<li>code</li>
</ul>
<h2 id="GC-算法"><a href="#GC-算法" class="headerlink" title="GC 算法"></a>GC 算法</h2><h3 id="过程"><a href="#过程" class="headerlink" title="过程"></a>过程</h3><h4 id="标记-清除"><a href="#标记-清除" class="headerlink" title="标记-清除"></a>标记-清除</h4><p>产生大量的不连续的内存碎片</p>
<h4 id="标记-整理"><a href="#标记-整理" class="headerlink" title="标记-整理"></a>标记-整理</h4><p>将清理的数据都向一端移动</p>
<h4 id="复制"><a href="#复制" class="headerlink" title="复制"></a>复制</h4><p>将内存划分为相等的两块, Eden-&gt;Survivor</p>
<h4 id="分代收集"><a href="#分代收集" class="headerlink" title="分代收集"></a>分代收集</h4><p>对前面的方案进行组合,新生代,有担保,复制,老年代,没有担保,标记-整理</p>
<p>GCROOT的枚举一定会发生STW, 使用OopMap记录GCROOT</p>
<h3 id="新生代"><a href="#新生代" class="headerlink" title="新生代"></a>新生代</h3><p>Serial : 单线程,复制,简单高效, 老年代标记整理<br>Parallel Scavenge: 复制算法,可控制的吞吐量<br>ParNew: Serial 的多线程版本, 唯一和CMS配合,新生代复制,老年代标记整理, -XX:ParallelGCThreads<br>G1:</p>
<h3 id="老年代"><a href="#老年代" class="headerlink" title="老年代"></a>老年代</h3><p>SerialOld: 标记-整理,搭配Parallel-Scavenge或者作为CMS的后备<br>Parallel old:Parallel Scavenge的老年代版本,标记整理,只能和Parallel Scavenge 搭配<br>Cms:</p>
<p>  最短停顿为目标,标记-清除,初始标记(STW,GCRoots能直接关联到的对象)-&gt;并发标记(GCROOT TRACING)-&gt;重新标记(STW,新增GCROOT)-&gt;并发清除</p>
<p>  碎片的问题可以有两种方案解决: full gc, 强制开启碎片整理</p>
<p>  浮动垃圾:在并发清理阶段产生的垃圾</p>
<p>  参数: -XXCMSInitiatingOccupancyFraction 老年代空间使用达到一定比例触发垃圾回收<br>G1:<br>  初始标记-&gt;并发标记-&gt;最终标记-&gt;筛选回收(优先回收价值对打的Region)</p>
<h2 id="内存分配策略"><a href="#内存分配策略" class="headerlink" title="内存分配策略"></a>内存分配策略</h2><ul>
<li>优先分配Eden</li>
<li>大对象直接进入老年代 -XX:PretenureSizeThreshold</li>
<li>长期存活的对象进入老年代 -XX:MaxTenuringThreshold</li>
<li>空间分配担保: 老年代最大可用的连续空间是否大于新生代所有对象总空间<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><h3 id="如何处理循环引用"><a href="#如何处理循环引用" class="headerlink" title="如何处理循环引用"></a>如何处理循环引用</h3>通过扫描是否有当前被引用的GCROOT到达,如果没有则可以清除</li>
</ul>
<h3 id="shallow-heap-和-retained-heap"><a href="#shallow-heap-和-retained-heap" class="headerlink" title="shallow heap 和 retained heap"></a>shallow heap 和 retained heap</h3><p>shallow heap是自身的内存开销<br>retained heap 是对象被清除后能回收多少内存</p>
<h3 id="major-gc-amp-fullgc"><a href="#major-gc-amp-fullgc" class="headerlink" title="major gc &amp; fullgc"></a>major gc &amp; fullgc</h3><p>作者：RednaxelaFX<br>链接：<a href="https://www.zhihu.com/question/41922036/answer/93079526" target="_blank" rel="noopener">https://www.zhihu.com/question/41922036/answer/93079526</a><br>来源：知乎<br>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p>
<p>针对HotSpot VM的实现，它里面的GC其实准确分类只有两大种：Partial GC：并不收集整个GC堆的模式Young GC：只收集young gen的GCOld GC：只收集old gen的GC。只有CMS的concurrent collection是这个模式Mixed GC：收集整个young gen以及部分old gen的GC。只有G1有这个模式Full GC：收集整个堆，包括young gen、old gen、perm gen（如果存在的话）等所有部分的模式。Major GC通常是跟full GC是等价的，收集整个GC堆。但因为HotSpot VM发展了这么多年，外界对各种名词的解读已经完全混乱了，当有人说“major GC”的时候一定要问清楚他想要指的是上面的full GC还是old GC。最简单的分代式GC策略，按HotSpot VM的serial GC的实现来看，触发条件是：young GC：当young gen中的eden区分配满的时候触发。注意young GC中有部分存活对象会晋升到old gen，所以young GC后old gen的占用量通常会有所升高。full GC：当准备要触发一次young GC时，如果发现统计数据说之前young GC的平均晋升大小比目前old gen剩余的空间大，则不会触发young GC而是转为触发full GC（因为HotSpot VM的GC里，除了CMS的concurrent collection之外，其它能收集old gen的GC都会同时收集整个GC堆，包括young gen，所以不需要事先触发一次单独的young GC）；或者，如果有perm gen的话，要在perm gen分配空间但已经没有足够空间时，也要触发一次full GC；或者System.gc()、heap dump带GC，默认也是触发full GC。HotSpot VM里其它非并发GC的触发条件复杂一些，不过大致的原理与上面说的其实一样。当然也总有例外。Parallel Scavenge（-XX:+UseParallelGC）框架下，默认是在要触发full GC前先执行一次young GC，并且两次GC之间能让应用程序稍微运行一小下，以期降低full GC的暂停时间（因为young GC会尽量清理了young gen的死对象，减少了full GC的工作量）。控制这个行为的VM参数是-XX:+ScavengeBeforeFullGC。这是HotSpot VM里的奇葩嗯。可跳传送门围观：JVM full GC的奇怪现象，求解惑？ - RednaxelaFX 的回答并发GC的触发条件就不太一样。以CMS GC为例，它主要是定时去检查old gen的使用量，当使用量超过了触发比例就会启动一次CMS GC，对old gen做并发收集。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/04/语言/java/classloader/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lxm798">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/04/语言/java/classloader/" itemprop="url">.classloader</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-10-04T11:11:16+08:00">
                2019-10-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Classloader"><a href="#Classloader" class="headerlink" title="Classloader"></a>Classloader</h1><h2 id="加载"><a href="#加载" class="headerlink" title="加载"></a>加载</h2><h3 id="双亲委派"><a href="#双亲委派" class="headerlink" title="双亲委派"></a>双亲委派</h3><p>Classloader分为多个层级</p>
<ul>
<li>启动类加载器BootStrap Classloader加载JAVA_HOME/lib中或者-Xbootclasspath指定的路径中,并且是虚拟机识别的<br>如果需要把加载请求委派给引导类加载器直接使用null即可</li>
<li>扩展类加载器Extension Classloader: 由sun.misc.Launcher$ExtClassLoader实现,加载JAVA_HOME/lib/ext目录中,或者被java.ext.dirs系统便你那个指定的路径中所有的类库,开发者可以直接使用类扩展加载器</li>
<li>应用类加载器Application Classloader,y<br>类加载时优先去父ClassLoader中查找,如果父Classloader中没有找到则到到子Classloader中查找.<h4 id="好处"><a href="#好处" class="headerlink" title="好处"></a>好处</h4></li>
<li>类随着它的类加载器一起具备了一种带有优先级的层次关系<h4 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h4></li>
</ul>
<p>类层次划分\OGSI\热部署\代码加密<br>保证类是同一个<br>自定义classloader时可以先拦截class的加载过程,以确定是否需要交给父Classloader</p>
<h3 id="破坏"><a href="#破坏" class="headerlink" title="破坏"></a>破坏</h3><p>父classloader依赖子Classloader,ThreadLocal</p>
<p>代码热替换</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/04/系统调用/系统调用流程/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lxm798">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/04/系统调用/系统调用流程/" itemprop="url">Untitled</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-10-04T11:11:16+08:00">
                2019-10-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/04/数据结构和算法/skiplist/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lxm798">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/04/数据结构和算法/skiplist/" itemprop="url">.skiplist</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-10-04T11:11:16+08:00">
                2019-10-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="skiplist"><a href="#skiplist" class="headerlink" title="skiplist"></a>skiplist</h1><h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p>去年在redis中看到skiplist,作为Hash结构的一种实现,了解了下原理.现在在java中又看到ConcurrentSkipList, 这里回头看看整体实现.<br>skiplist 作为一种概率型索引结构,经常用来和平衡二叉树作为对比,个人实现后感觉实现比各类平衡二叉树要好很多</p>
<h2 id="数据结构说明"><a href="#数据结构说明" class="headerlink" title="数据结构说明"></a>数据结构说明</h2><p>对于有header的结构来说,总体描述如下:</p>
<h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><p>Node和skipList定义</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> V&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:de(<span class="keyword">int</span> level, <span class="keyword">const</span> T &amp; t, <span class="keyword">const</span> V &amp;v) &#123;</span><br><span class="line">    <span class="keyword">this</span>-&gt;t = t;</span><br><span class="line">    <span class="keyword">this</span>-&gt;v = v;</span><br><span class="line">    <span class="keyword">this</span>-&gt;level = level;</span><br><span class="line">    <span class="keyword">this</span>-&gt;nodes = (Node&lt;T,V&gt; **) <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">void</span> *) * level);</span><br><span class="line">    <span class="built_in">memset</span>(<span class="keyword">this</span>-&gt;nodes, <span class="number">0</span>, <span class="keyword">sizeof</span>(<span class="keyword">void</span> *) * level);</span><br><span class="line">&#125;</span><br><span class="line">T t;</span><br><span class="line">V v;</span><br><span class="line"><span class="keyword">int</span> level;</span><br><span class="line">Node&lt;T, V&gt; **nodes;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> V&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SkipList</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Node&lt;T, V&gt; * head;</span><br><span class="line">    <span class="keyword">int</span> level;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>增删改查</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line">SkipList(<span class="keyword">int</span> level) &#123;</span><br><span class="line">    <span class="keyword">this</span>-&gt;level = level;</span><br><span class="line">    head = <span class="keyword">new</span> Node&lt;T, V&gt;(level, <span class="number">-1000</span>, <span class="number">-1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">const</span> T &amp;t, <span class="keyword">const</span> V &amp;v)</span> </span>&#123;</span><br><span class="line">    Node&lt;T, V&gt; * node2Insert = <span class="keyword">new</span> Node&lt;T, V&gt;(level, t, v);</span><br><span class="line">    Node&lt;T, V&gt; * node = head;</span><br><span class="line">    <span class="comment">//待插入数据每个level的前驱节点</span></span><br><span class="line">    Node&lt;T, V&gt; *update[level];</span><br><span class="line">    <span class="built_in">memset</span>(update, <span class="number">0</span> ,<span class="keyword">sizeof</span>(<span class="keyword">void</span> *) *level);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> l = level - <span class="number">1</span> ; l &gt;= <span class="number">0</span>; --l) &#123;</span><br><span class="line">        <span class="comment">// 如果当前节点的l层没有后继,则跳过</span></span><br><span class="line">        <span class="keyword">while</span> (node-&gt;nodes[l] &amp;&amp; node-&gt;nodes[l]-&gt;t &lt; t)&#123;</span><br><span class="line">            node = node-&gt;nodes[l];</span><br><span class="line">        &#125;</span><br><span class="line">        update[l] = node;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> totalLevel = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (totalLevel &lt; level &amp;&amp; rand()%<span class="number">2</span>) &#123;</span><br><span class="line">        ++totalLevel;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; totalLevel; ++i) &#123;</span><br><span class="line">        node2Insert-&gt;nodes[i] = update[i]-&gt;nodes[i];</span><br><span class="line">        update[i]-&gt;nodes[i] = node2Insert;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Node&lt;T, V&gt; * findNode(T t) &#123;</span><br><span class="line">    Node&lt;T, V&gt; * node = head;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> l = level - <span class="number">1</span> ; l &gt;= <span class="number">0</span>; --l) &#123;</span><br><span class="line">        <span class="keyword">while</span> (node-&gt;nodes[l] &amp;&amp; node-&gt;nodes[l]-&gt;t &lt; t)&#123;</span><br><span class="line">            <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"goon"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">            node = node-&gt;nodes[l];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (node-&gt;nodes[l]) &#123;</span><br><span class="line">            <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; node-&gt;nodes[l]-&gt;t &lt;&lt; l &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (node-&gt;nodes[l] &amp;&amp; !(node-&gt;nodes[l]-&gt;t &lt; t) &amp;&amp; !(t &lt;node-&gt;nodes[l]-&gt;t)) &#123;</span><br><span class="line">            <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"find inner"</span> &lt;&lt; node-&gt;nodes[l]-&gt;t &lt;&lt; l &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">            <span class="keyword">return</span> node-&gt;nodes[l];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">update</span><span class="params">(<span class="keyword">const</span> T &amp;t, <span class="keyword">const</span> V &amp;v)</span> </span>&#123;</span><br><span class="line">    Node&lt;T, V&gt; * node = findNode(t);</span><br><span class="line">    <span class="keyword">if</span> (!node) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    node-&gt;v = v;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">remove</span><span class="params">(<span class="keyword">const</span> T &amp;t)</span> </span>&#123;</span><br><span class="line">    Node&lt;T, V&gt; *update[level];</span><br><span class="line">    <span class="built_in">memset</span>(update, <span class="number">0</span>, <span class="keyword">sizeof</span>(<span class="keyword">void</span>*) * level);</span><br><span class="line">    Node&lt;T,V&gt;* node = head;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = level - <span class="number">1</span>; i &gt;=<span class="number">0</span>; --i) &#123;</span><br><span class="line">        <span class="keyword">while</span>(node-&gt;nodes[i] &amp;&amp; node-&gt;nodes[i]-&gt;t &lt; t) &#123;</span><br><span class="line">            node = node-&gt;nodes[i];</span><br><span class="line">        &#125;</span><br><span class="line">        update[i] = node; </span><br><span class="line">    &#125;</span><br><span class="line">    Node&lt;T,V&gt; *toDelete = update[<span class="number">0</span>]-&gt;nodes[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">if</span> (!toDelete || toDelete-&gt;t != t) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i =<span class="number">0</span> ; i &lt; level; ++i) &#123;</span><br><span class="line">        update[i]-&gt;nodes[i] = toDelete-&gt;nodes[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">free</span>(toDelete-&gt;nodes);</span><br><span class="line">    <span class="built_in">free</span>(toDelete);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">debug</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Node&lt;T,V&gt; * node = head;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"debug::start"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">while</span> (node) &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span>&lt;&lt; node-&gt;t &lt;&lt; <span class="string">":"</span> &lt;&lt; node-&gt;v &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">        node = node-&gt;nodes[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"debug::stop"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/04/工作/新功能和重构/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lxm798">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/04/工作/新功能和重构/" itemprop="url">.新功能和重构</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-10-04T11:11:16+08:00">
                2019-10-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>我的情况:<br>主体相似,细节不同的代码<br>入口和出口不同<br>事件驱动,没有明确事件发送的流程</p>
<p>对不同的部分进行重构.合并两份代码,明确事件含义和对应的发送逻辑<br>重写:升级原有的任务接收入口<br>总体看我们属于重写,而不是重构<br>但是部分功能属于重构</p>
<p>遇到的困难:<br>开发前细节不明确<br>没有单元和集成测试</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/04/工作/工作杂谈/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lxm798">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/04/工作/工作杂谈/" itemprop="url">.工作杂谈</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-10-04T11:11:16+08:00">
                2019-10-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id><a href="#" class="headerlink" title></a></h1><p>技能,过去工作,未来规划<br>技能 / 公司JD</p>
<p>过去的工作:<br>以技术中台服务为主,主要内容集中在即时通讯,广告工程,媒体服务调度<br>即时通讯挑战:高并发,消息不丢不重复,高可用<br>广告:</p>
<p>未来工作:</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/04/服务工程化-On Designing and Deploying/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lxm798">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/04/服务工程化-On Designing and Deploying/" itemprop="url">.服务工程化-On?Designing?and?Deploying</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-10-04T11:11:16+08:00">
                2019-10-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>﻿# 服务工程化指标对比<br>读了On Designing and Deploying Internet-Scale Services论文后，按照论文中列举的相关指标和问题对之前的项目做了一个回顾。有些进行了打分，但是打分标准不够细致，以后需要继续完善当成服务质量的一个标准和方向。</p>
<p>回顾之前的三个项目：fc的工程化是最好的，远远领先于其他的项目(其中打分，强、一般、弱、无分别是3,2,1,0,这样会导致分数差距没那么大)。im整体看起来及格线左右，nts远远没有及格。</p>
<p>只有量化了才能看到几个服务之前的巨大差异，个人实际感受到的差距比表格列出的还要大。</p>
<h2 id="总体"><a href="#总体" class="headerlink" title="总体"></a>总体</h2><table>
<thead>
<tr>
<th>项目</th>
<th>im</th>
<th>fc</th>
<th>nts</th>
</tr>
</thead>
<tbody><tr>
<td>总体服务设计(21)</td>
<td>17</td>
<td>15</td>
<td>5</td>
</tr>
<tr>
<td>自动化配置和管理设计(10)</td>
<td>8</td>
<td>8</td>
<td>4</td>
</tr>
<tr>
<td>依赖管理(6)</td>
<td>4</td>
<td>5</td>
<td>3</td>
</tr>
<tr>
<td>发布周期和测试(12)</td>
<td>22</td>
<td>33</td>
<td>18</td>
</tr>
<tr>
<td>硬件选型和标准化(4)</td>
<td>11</td>
<td>12</td>
<td>5</td>
</tr>
<tr>
<td>运维和容量规划(5)</td>
<td>9</td>
<td>10</td>
<td>6</td>
</tr>
<tr>
<td>升级监控和报警(10)</td>
<td>20</td>
<td>23</td>
<td>17</td>
</tr>
<tr>
<td>优雅降级和准入控制(4)</td>
<td>2</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>客户和媒体沟通计划</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>客户自配置和自助</td>
<td>1</td>
<td>0</td>
<td>1</td>
</tr>
</tbody></table>
<h3 id="服务总体设计"><a href="#服务总体设计" class="headerlink" title="服务总体设计"></a>服务总体设计</h3><table>
<thead>
<tr>
<th>item</th>
<th>im</th>
<th>fc</th>
<th>nts</th>
</tr>
</thead>
<tbody><tr>
<td>面向失败设计</td>
<td>是</td>
<td>是</td>
<td>否</td>
</tr>
<tr>
<td>冗余和故障恢复</td>
<td>是</td>
<td>是</td>
<td>否</td>
</tr>
<tr>
<td>基于普通商用硬件</td>
<td>是</td>
<td>是</td>
<td>是（不完全）</td>
</tr>
<tr>
<td>单一版本软件</td>
<td>是</td>
<td>是</td>
<td>否</td>
</tr>
<tr>
<td>多租户</td>
<td>是</td>
<td>是</td>
<td>否</td>
</tr>
<tr>
<td>健康检查</td>
<td>否</td>
<td>是</td>
<td>是</td>
</tr>
<tr>
<td>在完整的环境开发</td>
<td>是</td>
<td>是</td>
<td>否</td>
</tr>
<tr>
<td>对底层零信任</td>
<td>是</td>
<td>是</td>
<td>否</td>
</tr>
<tr>
<td>不在多个组件实现相同的功能</td>
<td>是</td>
<td>是</td>
<td>否</td>
</tr>
<tr>
<td>同步集群之间独立</td>
<td>是</td>
<td>是</td>
<td>否</td>
</tr>
<tr>
<td>允许极少的紧急人工干预</td>
<td>部分是</td>
<td>否</td>
<td>否</td>
</tr>
<tr>
<td>保持简单和健壮</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>在所有层执行准入控制</td>
<td>否</td>
<td>否</td>
<td>-</td>
</tr>
<tr>
<td>对服务进行分区</td>
<td>？</td>
<td>？</td>
<td>？</td>
</tr>
<tr>
<td>理解网络设计</td>
<td>是</td>
<td>是</td>
<td>是</td>
</tr>
<tr>
<td>分析吞吐和延迟</td>
<td>是</td>
<td>是</td>
<td>否</td>
</tr>
<tr>
<td>把运维工具作为服务的一部分</td>
<td>是</td>
<td>否</td>
<td>否</td>
</tr>
<tr>
<td>理解访问模式</td>
<td>是</td>
<td>是</td>
<td>否</td>
</tr>
<tr>
<td>一切版本化</td>
<td>是</td>
<td>是</td>
<td>是</td>
</tr>
<tr>
<td>保留ut和ft</td>
<td>是</td>
<td>是</td>
<td>否</td>
</tr>
<tr>
<td>避免单点故障</td>
<td>是</td>
<td>是</td>
<td>是</td>
</tr>
</tbody></table>
<h3 id="自动化管理和配置"><a href="#自动化管理和配置" class="headerlink" title="自动化管理和配置"></a>自动化管理和配置</h3><table>
<thead>
<tr>
<th>item</th>
<th>im</th>
<th>fc</th>
<th>nts</th>
</tr>
</thead>
<tbody><tr>
<td>能够重启和冗余</td>
<td>是</td>
<td>是</td>
<td>否</td>
</tr>
<tr>
<td>多地域部署</td>
<td>是</td>
<td>是</td>
<td>否</td>
</tr>
<tr>
<td>自动配置和安装</td>
<td>是</td>
<td>是</td>
<td>是</td>
</tr>
<tr>
<td>配置和代码作为一体</td>
<td>是</td>
<td>是</td>
<td>是</td>
</tr>
<tr>
<td>记录所有变量</td>
<td>是</td>
<td>是</td>
<td>是</td>
</tr>
<tr>
<td>多系统故障处理</td>
<td>是</td>
<td>是</td>
<td>否</td>
</tr>
<tr>
<td>在服务级别恢复</td>
<td>？</td>
<td>？</td>
<td>？</td>
</tr>
<tr>
<td>不要依赖单机存储的信息</td>
<td>是</td>
<td>是</td>
<td>否</td>
</tr>
<tr>
<td>保持部署简单</td>
<td>是</td>
<td>是</td>
<td>一般</td>
</tr>
<tr>
<td>定期引入故障</td>
<td>否</td>
<td>否</td>
<td>否</td>
</tr>
</tbody></table>
<h3 id="依赖管理"><a href="#依赖管理" class="headerlink" title="依赖管理"></a>依赖管理</h3><table>
<thead>
<tr>
<th>item</th>
<th>im</th>
<th>fc</th>
<th>nts</th>
</tr>
</thead>
<tbody><tr>
<td>延时管理</td>
<td>是</td>
<td>是</td>
<td>是(部分)</td>
</tr>
<tr>
<td>故障隔离</td>
<td>？</td>
<td>？</td>
<td>？</td>
</tr>
<tr>
<td>使用经验证的稳定组件</td>
<td>一般</td>
<td>是</td>
<td>一般</td>
</tr>
<tr>
<td>实现内部服务的监控和报警</td>
<td>是</td>
<td>？</td>
<td>否</td>
</tr>
<tr>
<td>被依赖的组件需要同样的sla</td>
<td>是</td>
<td>是</td>
<td>是</td>
</tr>
<tr>
<td>组件解耦</td>
<td>否</td>
<td>否</td>
<td>否</td>
</tr>
</tbody></table>
<h3 id="发布周期和测试"><a href="#发布周期和测试" class="headerlink" title="发布周期和测试"></a>发布周期和测试</h3><table>
<thead>
<tr>
<th>item</th>
<th>im</th>
<th>fc</th>
<th>nts</th>
</tr>
</thead>
<tbody><tr>
<td>经常发布</td>
<td>强</td>
<td>强</td>
<td>强</td>
</tr>
<tr>
<td>利用线上数据发现问题</td>
<td>弱</td>
<td>强</td>
<td>弱</td>
</tr>
<tr>
<td>加大工程投入</td>
<td>强</td>
<td>强</td>
<td>弱</td>
</tr>
<tr>
<td>支持版本回滚</td>
<td>强</td>
<td>强</td>
<td>强</td>
</tr>
<tr>
<td>保持向前和先后兼容</td>
<td>强</td>
<td>强</td>
<td>弱</td>
</tr>
<tr>
<td>单机部署支持</td>
<td>弱</td>
<td>强</td>
<td>一般</td>
</tr>
<tr>
<td>针对负载进行压力测试</td>
<td>一般</td>
<td>强</td>
<td>弱</td>
</tr>
<tr>
<td>在新发布之前进行容量和性能测试</td>
<td>一般</td>
<td>强</td>
<td>弱</td>
</tr>
<tr>
<td>增量迭代进行构建和部署</td>
<td>？</td>
<td>？</td>
<td>？</td>
</tr>
<tr>
<td>采用真实数据测试</td>
<td>无</td>
<td>强</td>
<td>弱</td>
</tr>
<tr>
<td>运行系统级验收测试</td>
<td>强</td>
<td>强</td>
<td>一般</td>
</tr>
<tr>
<td>在完整环境中进行测试开发</td>
<td>一般</td>
<td>强</td>
<td>一般</td>
</tr>
</tbody></table>
<h3 id="硬件选型和标准化"><a href="#硬件选型和标准化" class="headerlink" title="硬件选型和标准化"></a>硬件选型和标准化</h3><table>
<thead>
<tr>
<th>item</th>
<th>im</th>
<th>fc</th>
<th>nts</th>
</tr>
</thead>
<tbody><tr>
<td>只是用标准SKUS</td>
<td>一般</td>
<td>强</td>
<td>弱</td>
</tr>
<tr>
<td>整机柜采购</td>
<td>强</td>
<td>强</td>
<td>弱</td>
</tr>
<tr>
<td>硬件抽象</td>
<td>强</td>
<td>强</td>
<td>强</td>
</tr>
<tr>
<td>对网络和命名服务进行抽象</td>
<td>强</td>
<td>强</td>
<td>无</td>
</tr>
</tbody></table>
<h3 id="运维和容量规划"><a href="#运维和容量规划" class="headerlink" title="运维和容量规划"></a>运维和容量规划</h3><table>
<thead>
<tr>
<th>item</th>
<th>im</th>
<th>fc</th>
<th>nts</th>
</tr>
</thead>
<tbody><tr>
<td>增强开发团队责任感</td>
<td>强</td>
<td>强</td>
<td>弱</td>
</tr>
<tr>
<td>只进行软删除</td>
<td>一般</td>
<td>一般</td>
<td>一般</td>
</tr>
<tr>
<td>跟踪资源分配</td>
<td>一般</td>
<td>强</td>
<td>弱</td>
</tr>
<tr>
<td>一次只进行一个变更</td>
<td>弱</td>
<td>弱</td>
<td>弱</td>
</tr>
<tr>
<td>所有东西可配置</td>
<td>弱</td>
<td>弱</td>
<td>弱</td>
</tr>
</tbody></table>
<h3 id="审计、监控和报警"><a href="#审计、监控和报警" class="headerlink" title="审计、监控和报警"></a>审计、监控和报警</h3><table>
<thead>
<tr>
<th>item</th>
<th>im</th>
<th>fc</th>
<th>nts</th>
</tr>
</thead>
<tbody><tr>
<td>监控所有内容</td>
<td>一般</td>
<td>强</td>
<td>弱</td>
</tr>
<tr>
<td>数据收集和推断</td>
<td>一般</td>
<td>一般</td>
<td>弱</td>
</tr>
<tr>
<td>具有服务的客户视角</td>
<td>弱</td>
<td>无</td>
<td>强</td>
</tr>
<tr>
<td>对生产环境测试进行监控</td>
<td>强</td>
<td>强</td>
<td>弱</td>
</tr>
<tr>
<td>处理延时</td>
<td>强</td>
<td>强</td>
<td>弱</td>
</tr>
<tr>
<td>足够的数据</td>
<td>强</td>
<td>强</td>
<td>一般</td>
</tr>
<tr>
<td>日志可配置</td>
<td>一般</td>
<td>一般</td>
<td>一般</td>
</tr>
<tr>
<td>向监控系统暴漏健康信息</td>
<td>一般</td>
<td>一般</td>
<td>一般</td>
</tr>
<tr>
<td>保证所有报告的错误都有相应的处理动作</td>
<td>一般</td>
<td>一般</td>
<td>一般</td>
</tr>
<tr>
<td>生产环境问题的快速诊断</td>
<td>一般</td>
<td>强</td>
<td>一般</td>
</tr>
</tbody></table>
<h3 id="优雅降级和准入控制"><a href="#优雅降级和准入控制" class="headerlink" title="优雅降级和准入控制"></a>优雅降级和准入控制</h3><table>
<thead>
<tr>
<th>item</th>
<th>im</th>
<th>fc</th>
<th>nts</th>
</tr>
</thead>
<tbody><tr>
<td>支持big red switch</td>
<td>无</td>
<td>？</td>
<td>无</td>
</tr>
<tr>
<td>准入控制</td>
<td>一般</td>
<td>？</td>
<td>无</td>
</tr>
<tr>
<td>准入计量</td>
<td>无</td>
<td>无</td>
<td>无</td>
</tr>
</tbody></table>
<h3 id="客户自配置和自助"><a href="#客户自配置和自助" class="headerlink" title="客户自配置和自助"></a>客户自配置和自助</h3><table>
<thead>
<tr>
<th>item</th>
<th>im</th>
<th>fc</th>
<th>nts</th>
</tr>
</thead>
<tbody><tr>
<td>客户配置</td>
<td>无</td>
<td>无</td>
<td>无</td>
</tr>
<tr>
<td>自助</td>
<td>弱</td>
<td>无</td>
<td>弱</td>
</tr>
</tbody></table>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/04/分布式一致性/分布式一致性/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lxm798">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/04/分布式一致性/分布式一致性/" itemprop="url">.分布式一致性</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-10-04T11:11:16+08:00">
                2019-10-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="分布式一致性"><a href="#分布式一致性" class="headerlink" title="分布式一致性"></a>分布式一致性</h1><h2 id="分布式事务"><a href="#分布式事务" class="headerlink" title="分布式事务"></a>分布式事务</h2><h3 id="TCC"><a href="#TCC" class="headerlink" title="TCC"></a>TCC</h3><p>TCC需要将事务信息添加到内存中,溶蚀进行外部持久化</p>
<h3 id="XA"><a href="#XA" class="headerlink" title="XA"></a>XA</h3><h3 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h3><p>####悬挂</p>
<h2 id="强一致"><a href="#强一致" class="headerlink" title="强一致"></a>强一致</h2><h2 id="最终一致"><a href="#最终一致" class="headerlink" title="最终一致"></a>最终一致</h2><p>都是通过定时任务回查root事务是否超时或者完成或者失败,来更新是否commit 消息\数据</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">John Doe</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">82</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">John Doe</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
